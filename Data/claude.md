# 原神任务对话提取技能说明

## 数据来源
- 网站：Project Amber (gi.yatta.moe)
- 内容类型：原神任务剧情对话
- 基础URL格式：`https://gi.yatta.moe/chs/archive/quest/{任务ID}/{任务名slug}?chapter={章节号}`
- 注意:任务名slug无意义，仅用于url标识，任务名slug不影响指向的内容

## 提取方法
1. 使用Chrome浏览器扩展访问目标URL
2. 调用 `get_page_text` 获取页面纯文本内容
3. 整理对话格式并保存为txt文件
4. 每个任务保存到独立文件夹

## 并行提取说明
- 支持多任务并行提取，每个任务使用独立的浏览器标签页
- 任务ID支持重定向，直接访问 `quest/{ID}` 会自动跳转到完整URL
- 每个任务通常有多个chapter（0, 1, 2...），需遍历提取
- 如果访问特定网页5s没有反应，说明该页面资源不存在

## 保存格式
```
# 任务名称 - 第X章：章节名
# 系列名称（如：空月之歌 第X幕）
# 来源：URL

# 剧情简介

## 场景/剧情段落标题
角色名：对话内容
角色名：对话内容
...

## 下一个场景
...
```

## 内容格式
- 文件编码：UTF-8
- 文件格式：.txt
- 角色对话：`角色名：对话内容`
- 玩家内心独白：`玩家：（独白内容）`
- 其他角色内心独白：`角色名：（独白内容）`
- 多分支选项：用 `## Scenario 1/2/3` 区分
- 场景分隔：用 `## 场景名称` 标记

## 命名格式
- 文件夹：使用任务中文名称
- 章节文件：`chapter{章节号}_dialogue.txt`

## 修复任务清单

样例文件: data/1600/chapter1_dialogue.txt

### 任务1: 真实之月 [已完成]
- 已添加系列名称：空月之歌 第八幕
- 已添加剧情简介
- 文件: chapter0, chapter1, chapter2
- 任务ID: 1608

### 任务2: 如果在冬夜,一个旅人 [已完成]
- 已添加系列名称：空月之歌 第七幕
- 已添加剧情简介
- 文件: chapter0, chapter1, chapter2
- 任务ID: 1607

### 任务3: 回望湮灭的月光 [已完成]
- 已重命名文件：chapter2_dialogue[NEED ADJUSTMENT].txt → chapter2_dialogue.txt
- 已整理格式为标准对话格式
- 文件: chapter2
- 任务ID: 1604

### 任务4: 验证其他文件夹格式 [待验证]
- 不存在的国土
- 散于晨雾的月芒
- 终北的夜行诗
- 雪浪与苍林之舞
- 尘与灯的挽歌

## 快速提取命令参考

并行提取多个任务时，可同时启动多个浏览器标签页：
1. 访问 `https://gi.yatta.moe/chs/archive/quest/{ID}` 获取任务信息
2. 遍历 `?chapter=0`, `?chapter=1`, `?chapter=2`... 如果5s内无响应说明该资源无内容
3. 使用 `get_page_text` 提取每个章节
4. 保存到对应文件夹
