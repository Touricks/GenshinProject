# Risk Register
# Genshin Story QA System

> 版本: 1.0
> 创建日期: 2026-01-27
> 状态: Active

---

## Risk Assessment Matrix

| 影响 ↓ / 可能性 → | 低 (1) | 中 (2) | 高 (3) |
|-------------------|:------:|:------:|:------:|
| **高 (3)** | 中 | 高 | 严重 |
| **中 (2)** | 低 | 中 | 高 |
| **低 (1)** | 低 | 低 | 中 |

---

## Technical Risks

### R-T01: 中文语义理解不准确

| 属性 | 值 |
|------|-----|
| **类别** | 技术 |
| **可能性** | 中 (2) |
| **影响** | 高 (3) |
| **风险等级** | 高 |
| **状态** | Open |

**描述:**
中文具有复杂的语义结构，包括同音异义词、古风用语、游戏专有术语等，可能导致嵌入模型无法准确捕捉语义。

**触发条件:**
- 用户使用游戏内的专有术语
- 角色使用文言文或诗意化表达
- 问题包含多义词

**影响:**
- 检索结果不相关
- 答案质量下降
- 用户体验受损

**缓解措施:**
| 措施 | 负责人 | 截止日期 | 状态 |
|------|--------|----------|------|
| 使用专门的中文嵌入模型 (BGE-zh) | - | v1.0 | Planned |
| 构建游戏术语同义词表 | - | v1.0 | Planned |
| 添加查询预处理（术语扩展） | - | v2.0 | Planned |

**应急计划:**
如果 BGE-zh 效果不佳，考虑微调嵌入模型或使用 OpenAI 中文嵌入。

---

### R-T02: 角色别名导致检索遗漏

| 属性 | 值 |
|------|-----|
| **类别** | 技术 |
| **可能性** | 高 (3) |
| **影响** | 中 (2) |
| **风险等级** | 高 |
| **状态** | Open |

**描述:**
原神角色通常有多个称呼（正式名、昵称、代号等），用户可能使用任意一种，但文本中可能只使用特定称呼。

**示例:**
- "玩家" vs "旅行者" vs "杜麦尼"
- "派蒙" vs "应急食品"
- 角色的职位称呼 vs 本名

**触发条件:**
- 用户使用非正式称呼查询
- 同一角色在不同章节使用不同称呼

**影响:**
- 检索不到相关内容
- 答案不完整

**缓解措施:**
| 措施 | 负责人 | 截止日期 | 状态 |
|------|--------|----------|------|
| 构建角色别名映射表 | - | v1.0 | Planned |
| 查询时自动扩展别名 | - | v1.0 | Planned |
| 索引时进行实体归一化 | - | v2.0 | Planned |

**应急计划:**
允许用户手动添加别名映射。

---

### R-T03: LLM 产生幻觉

| 属性 | 值 |
|------|-----|
| **类别** | 技术 |
| **可能性** | 中 (2) |
| **影响** | 高 (3) |
| **风险等级** | 高 |
| **状态** | Open |

**描述:**
LLM 可能在检索结果不充分时，基于其预训练知识编造不存在于原始剧情中的信息。

**触发条件:**
- 检索结果相关性低
- 问题涉及检索范围外的内容
- Prompt 引导不当

**影响:**
- 提供错误的剧情信息
- 用户信任度下降
- 系统可靠性受损

**缓解措施:**
| 措施 | 负责人 | 截止日期 | 状态 |
|------|--------|----------|------|
| 严格的 RAG Prompt 设计（仅基于检索内容回答） | - | v1.0 | Planned |
| 添加 Faithfulness 评估指标 | - | v1.0 | Planned |
| 低置信度时返回"信息不足"而非猜测 | - | v1.0 | Planned |
| 引用来源强制要求 | - | v1.0 | Planned |

**应急计划:**
如果幻觉率过高，考虑使用更保守的生成策略或人工审核高风险答案。

---

### R-T04: 跨章节信息整合困难

| 属性 | 值 |
|------|-----|
| **类别** | 技术 |
| **可能性** | 中 (2) |
| **影响** | 高 (3) |
| **风险等级** | 高 |
| **状态** | Open |

**描述:**
用户可能询问跨越多个章节的问题，需要系统整合分散在不同文档中的信息。

**触发条件:**
- 用户询问角色在整个故事线中的发展
- 用户询问事件的完整经过
- 信息分散在多个文件中

**影响:**
- 答案不完整
- 遗漏关键信息
- 时间线混乱

**缓解措施:**
| 措施 | 负责人 | 截止日期 | 状态 |
|------|--------|----------|------|
| 丰富文档元数据（任务ID、章节号、时间顺序） | - | v1.0 | Planned |
| 支持范围检索（同一任务的所有章节） | - | v2.0 | Planned |
| 构建知识图谱关联跨章节实体 | - | v2.0 | Planned |
| 答案后处理：按时间排序整合 | - | v2.0 | Planned |

**应急计划:**
对于复杂的跨章节问题，引导用户分步查询。

---

### R-T05: 多轮对话上下文丢失

| 属性 | 值 |
|------|-----|
| **类别** | 技术 |
| **可能性** | 中 (2) |
| **影响** | 中 (2) |
| **风险等级** | 中 |
| **状态** | Open |

**描述:**
在多轮对话中，系统可能丢失早期对话的上下文，导致指代消解失败或话题断裂。

**触发条件:**
- 对话轮次较多
- 长时间间隔后继续对话
- 频繁切换话题

**影响:**
- 代词无法正确解析
- 需要用户重复信息
- 对话体验不连贯

**缓解措施:**
| 措施 | 负责人 | 截止日期 | 状态 |
|------|--------|----------|------|
| 集成 Mem0 记忆管理 | - | v3.0 | Planned |
| 设计合理的记忆窗口策略 | - | v3.0 | Planned |
| 关键实体显式记录 | - | v3.0 | Planned |
| 上下文摘要压缩 | - | v3.0 | Planned |

**应急计划:**
在上下文不明确时，主动请求用户澄清。

---

## Operational Risks

### R-O01: 数据更新维护成本

| 属性 | 值 |
|------|-----|
| **类别** | 运营 |
| **可能性** | 低 (1) |
| **影响** | 中 (2) |
| **风险等级** | 低 |
| **状态** | Open |

**描述:**
随着原神版本更新，需要持续添加新的剧情数据，可能增加维护成本。

**触发条件:**
- 新版本发布
- 需要添加新任务对话
- 数据格式变化

**影响:**
- 数据不及时更新
- 维护工作量增加
- 系统内容过时

**缓解措施:**
| 措施 | 负责人 | 截止日期 | 状态 |
|------|--------|----------|------|
| 设计增量索引机制 | - | v2.0 | Planned |
| 标准化数据导入流程 | - | v1.0 | Planned |
| 编写数据提取自动化脚本 | - | v2.0 | Planned |

---

### R-O02: API 服务依赖

| 属性 | 值 |
|------|-----|
| **类别** | 运营 |
| **可能性** | 低 (1) |
| **影响** | 高 (3) |
| **风险等级** | 中 |
| **状态** | Open |

**描述:**
系统依赖外部 LLM API（Claude/GPT-4），可能面临服务不可用或费用问题。

**触发条件:**
- API 服务中断
- API 配额耗尽
- 费用超出预算

**影响:**
- 系统无法使用
- 响应延迟增加
- 运营成本上升

**缓解措施:**
| 措施 | 负责人 | 截止日期 | 状态 |
|------|--------|----------|------|
| 准备备选 LLM 提供商 | - | v1.0 | Planned |
| 实现 API 降级策略 | - | v2.0 | Planned |
| 考虑本地部署 Qwen 作为备选 | - | v3.0 | Planned |
| 设置费用监控和告警 | - | v1.0 | Planned |

---

## Quality Risks

### R-Q01: 评测覆盖不足

| 属性 | 值 |
|------|-----|
| **类别** | 质量 |
| **可能性** | 中 (2) |
| **影响** | 中 (2) |
| **风险等级** | 中 |
| **状态** | Open |

**描述:**
评测数据集可能无法覆盖所有用户查询场景，导致上线后出现未预见的问题。

**触发条件:**
- 评测集规模小
- 缺少边缘场景
- 未覆盖实际用户需求

**影响:**
- 潜在问题未被发现
- 用户体验低于预期
- 需要频繁修复

**缓解措施:**
| 措施 | 负责人 | 截止日期 | 状态 |
|------|--------|----------|------|
| 扩大评测数据集（75+ 条） | - | v1.0 | Planned |
| 覆盖各类查询场景 | - | v1.0 | Planned |
| 收集真实用户查询反馈 | - | v3.0 | Planned |
| 持续扩充评测集 | - | 持续 | Planned |

---

## Risk Summary Dashboard

| 风险等级 | 数量 | 风险 ID |
|----------|:----:|---------|
| 严重 | 0 | - |
| 高 | 4 | R-T01, R-T02, R-T03, R-T04 |
| 中 | 3 | R-T05, R-O02, R-Q01 |
| 低 | 1 | R-O01 |

---

## Risk Review Schedule

| 阶段 | 日期 | 重点关注风险 |
|------|------|--------------|
| v1.0 发布前 | TBD | R-T01, R-T02, R-T03 |
| v2.0 发布前 | TBD | R-T04, R-O01 |
| v3.0 发布前 | TBD | R-T05, R-Q01 |

---

## Change Log

| 日期 | 变更内容 | 作者 |
|------|----------|------|
| 2026-01-27 | 初始风险清单 | - |
